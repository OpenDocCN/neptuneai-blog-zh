# 用于机器学习的持续集成和持续部署(CI/CD)工具

> 原文：<https://web.archive.org/web/https://neptune.ai/blog/continuous-integration-continuous-deployment-tools-for-machine-learning>

在现代软件开发团队中，持续集成(CI)和持续部署(CD)是标准实践。

CI 是关于项目应该如何在各种运行时自动地和连续地构建和测试。

CD 是必需的，这样通过自动化测试的每一个新代码都可以被发布到产品中，而不需要额外的努力。

在 ML 项目中采用 CI/CD 工具是非常有益的。这些工具可以帮助您快速找到代码中的错误和矛盾，从长远来看，可以降低停机时间的成本。

在现实世界的项目中，专家很难选择与企业采用的[项目管理](/web/20221117203653/https://neptune.ai/blog/data-science-project-management-in-2021-the-new-guide-for-ml-teams)方案不冲突的高质量机器学习模型。这导致错过最后期限和超支。

为了保持预算和满足期限(特别是在早期阶段)，ML 团队已经采用了来自传统软件开发的 CI/CD 等最佳实践。

手动做任何事情都很痛苦。您必须分配一台单独的服务器并保持其正常工作，确保必要软件系统的可用性，建立运行时环境，制作数据的备份副本，等等。

将这些职责委托给第三方服务很方便。有许多工具可以促进这种采用，其中许多是专门为机器学习工程师设计的。

在本帖中，我们将讨论机器学习项目中 CI/CD 的七个最佳工具。

## 机器学习的最佳 CI/CD 服务

机器学习工程师花费大量时间检查他们的模型是否有问题，并优化模型性能。CI/CD 工具消除了时间浪费，并尽可能自动化手动工作。

让我们仔细看看它们。

|  | 插件 | 证明文件 | 集气瓶架 | 主办；主持 | 操作系统 | 定价 |
| --- | --- | --- | --- | --- | --- | --- |
| **CML** | **2/5** | **合理** | **是** | **在内部/云上** | **任何** | **免费** |
| **GitHub 动作** | **3/5** | **穷** | **是** | **在内部/云上** | **Linux，macOS，Windows** | **免费** |
| **GitLab CI/CD** | **2/5** | **好的** | **是** | **在内部/云上** | **Linux，macOS，Windows** | **免费/付费** |
| 詹金斯 | **5/5** | **伟大的** | **是** | **在内部/云上** | **Windows、Linux、macOS 和其他类似 Unix 的操作系统** | **免费** |
| **TeamCity** | **5/5** | **伟大的** | **是** | **在内部/云上** | **Linux，macOS，Windows** | **$45-$1999** |
| **圈 CI** | **4/5** | **合理** | **是** | **在内部/云上** | **Ubuntu，macOS，Linux，Android 和 Windows** | **某些配置免费/付费** |
| **特拉维斯 CI** | **5/5** | **好的** | **是** | **在内部/云上** | **Ubuntu，macOS** | **开源免费/商业使用 69-479 美元** |

### 1.currentmodelogic 电流型逻辑的

[CML，即持续机器学习](https://web.archive.org/web/20221117203653/https://github.com/iterative/cml)，是一个开源工具，用于持续集成和部署机器学习项目。这是为数不多的专门为 [MLOps](/web/20221117203653/https://neptune.ai/blog/mlops-what-it-is-why-it-matters-and-how-to-implement-it-from-a-data-scientist-perspective) 需求定制的项目之一，所以你可以轻松尝试一下。

这个工具是由制作 [DVC](https://web.archive.org/web/20221117203653/https://dvc.org/) 的同一个团队开发的，这是一个用于 ML 模型版本控制的开源库。CML 努力使 ML 模型的实现和部署变得容易，并以更少的错误更快地将它们带入交付阶段。

CML 旨在自动化 ML 工程师每天必须执行的一些日常任务，例如训练模型、评估它们的性能、创建和标记数据集等等。CML 具有广泛的特性:从制作和发送自动化报告，到发布数据，到为项目分配云资源。对于基础设施任务，您可以应用已经提到的 DVC 或者使用 [Docker](https://web.archive.org/web/20221117203653/https://www.docker.com/) 来代替。

该工具支持用于数据科学项目的 GitFlow，允许自动生成报告，并使您不必更深入地研究使用外部服务的复杂细节。这些外部服务的例子是像 AWS、Azure 和 Google Cloud 这样的云平台。

**优点:**

*   CML 将 GitFlow 用于数据科学。无论你习惯使用 GitLab 还是 GitHub，你都可以在你最熟悉的环境中管理 ML 实验。也可以使用 DVC 来代替 Git 回购。
*   它为 ML 项目提供了自动化报告。CML 自动监控不断变化的数据集，并跨项目历史比较 ML 实验，以在每个 Git 拉取请求中生成带有指标和图形的可视化报告。这样，您的工程团队就可以保持警惕，做出数据驱动的决策。
*   CML 支持将模型工件从 GitHub 操作工作流发布到带有附加 GitHub 问题和 pull 请求的评论中。这弥补了拉式请求会计的不足，并提高了模型的准确性和有效性。
*   有了 CML，你就不必使用额外的服务。CML 使你能够在 GitLab、Bitbucket 或 GitHub 的帮助下构建自己的 ML 平台。如果您愿意，也可以使用云存储(但这是可选的)。

**缺点:**

*   这个项目很年轻。CML 的创造者声称有数百名活跃的贡献者，但现实是 CML 仍处于发展阶段。它可能包含错误和低质量的贡献，并且不能保证该项目在将来会得到支持。

**概要:**

*   操作系统:任何
*   容器支持:是
*   文档:好
*   定价:免费

### 2.GitHub 操作

[GitHub Actions](https://web.archive.org/web/20221117203653/https://github.com/features/actions) 是 GitHub 上最近推出的工作流自动化功能。GitHub 为 CI/CD 提供了一些功能，比如推送代码、创建发布或者管理问题。

登录 GitHub 后，您可以立即访问 GitHub 操作。它为 CI/CD 提供了巨大的可能性，包括自动化测试、构建容器、部署 web 服务，或者在您的开源项目中自动化新用户的加入。

GitHub 不仅仅是一个 [MLOps](/web/20221117203653/https://neptune.ai/blog/mlops-what-it-is-why-it-matters-and-how-to-implement-it-from-a-data-scientist-perspective) 工具――用例更加通用。然而，由于许多公司在 GitHub 上为他们的 ML 项目编写和存储代码，对于一些团队来说，它可能比我们列表中的任何其他工具都更方便。一个不可否认的好处是世界上最活跃的社区之一，致力于改善和发展这个项目。

Github Actions 绝对值得一看。如果你不想在定制配置上浪费时间，Github 提供了一个图形界面，在这里你可以快速完成所有工作。

**优点:**

*   您可以通过开箱即用的身份验证直接访问 GitHub API。不需要复杂的设置。
*   GitHub 动作只是连续的 docker 运行。这使得它们很容易推理和调试。
*   您可以隔离工作流中的操作，以便进行无缝测试。您可以在两种不同的计算环境中托管编译和测试。

**缺点:**

*   没有本机缓存。您可以获得图像和图层缓存，但除此之外别无其他。对于人工制品，你必须滚动自己的缓存，这可能是一个很大的工作量。
*   不支持来自分叉的拉请求。对于包含 fork 的工作流，这使得 GitHub 操作很大程度上不能作为 CI/CD 工具使用。
*   这份文件有许多需要改进的地方。希望将来会变得更好。

**概要:**

*   操作系统:Linux、macOS、Windows
*   容器支持:是
*   文档:差
*   定价:免费

### 3.CI/CD 的 GitLab

这是一个免费的开源产品，在 MIT 许可下发布，用 Go 和 Ruby 编写。基于此解决方案的独立服务器可以处理 25，000 多名用户。

[GitLab CI/CD](https://web.archive.org/web/20221117203653/https://docs.gitlab.com/ee/ci/) 使您能够使用存储库并进行代码审查。它还有一个误差控制系统。为了更好地保护用户隐私，您可以通过在本地安装该工具来将它链接到 Active Directory 和 LDAP 服务器。

一个庞大而复杂的社区使得使用该产品变得相当舒适。GitLab 不仅用于编写代码，还用于彻底审查代码。几乎所有的构建环境和版本控制系统都被支持。

**优点:**

*   详细的文档和简单的管理。平台和文档都有许多活跃的贡献者，这使得找到您需要的东西更加容易。
*   监控测试结果的便捷用户界面。大型和小型团队都可以使用这个 CI/CD 工具，因为您可以向个人和用户组授予读取和修改权限。
*   简单的资源管理。在 GitLab CI/CD 中，您可以轻松地将人员分配到项目检查点，并按任务分组。
*   方便的并行测试拉请求和分支。这使得它成为开源项目的一个好选择。

**缺点:**

*   需要为每个任务定义和加载工件。
*   不支持大型任务中的阶段。

**概要:**

*   操作系统:Linux、macOS、Windows
*   容器支持:是
*   文档:好
*   定价:免费，[付费自托管](https://web.archive.org/web/20221117203653/https://about.gitlab.com/blog/2018/04/20/gitlab-tiers/)

### 4.詹金斯

Jenkins 是一个流行的 CI/CDJava 应用程序，可以在 Windows、Mac OS X 和其他类似 Unix 的操作系统上运行，它在 MIT 许可下运行。它有一组丰富的特性来自动执行构建、测试、部署、集成和发布软件的任务。

除了通过传统的安装包安装之外，Jenkins 可以独立安装，也可以作为 Docker 安装在任何安装了 Java Runtime Environment (JRE)的机器上。Jenkins 团队还有一个名为 Jenkins X 的子项目，专门研究 Kubernetes 集群中的 CI/CD。

詹金斯团队已经发布了大约 1500 个插件，因此它可以与其他解决方案一起使用，例如与 Slack 或吉拉一起使用。集成也可用于一系列 DevOps 测试工具。REST API 支持对系统的远程访问。就像 GitLab 一样，该产品拥有一个庞大的充满激情的社区。

**优点:**

*   易于设置和更新。只需几个步骤，您就可以安装 Jenkins 并开始您的项目工作(然而，这里有一个我们稍后描述的转折)。也可以在 web 界面中进行设置和配置。
*   详细、易懂的文档。Jenkins 有一个专业团队，负责整理文档。
*   易于与其他工具集成。这个工具提供了数百个插件，所以它基本上可以与任何 CI/CD 工具集成。
*   分布式装配的多台机器。当您需要在几个不同的环境中测试产品时，这在任务中很有用。它还允许您在不同的条件下运行程序集。

**缺点:**

*   专用服务器。如果你想使用 Jenkins，你必须设置一个服务器，这需要服务器本身的额外费用。
*   对于更大的团队。Jenkins 是一个企业级工具。该解决方案对于小型项目来说并不太好，因为设置需要大量的工作。

**概要:**

*   操作系统:Windows、Linux、macOS
*   容器支持:是的。
*   文档:好
*   定价:免费

### 5.团队城市

[TeamCity](https://web.archive.org/web/20221117203653/https://www.jetbrains.com/teamcity/) 是 JetBrains 团队打造的企业级持续集成服务器。它有强大的功能和一个非常健壮的免费版本，适用于小型项目(最多 100 个构建配置)。

TeamCity 提供了对许多开源插件的广泛支持，包括 JetBrains 的产品和第三方应用程序和工具。此外，团队城市提供了真棒。净支持。

由于所有这些，这个持续集成服务器是高度可靠的，并且独立于程序集的启动。TeamCity 集成了多个版本控制系统。

该软件提供了跟踪提交的能力，然后立即启动构建创建和单元测试。例如，如果提交后测试或编译失败，开发人员将会收到需要修改代码的通知。得益于便捷的网络界面，你可以实时看到发生了什么。

Java 代码由 IntelliJ IDEA inspections 进行分析。因此，负责代码质量的检查可以快速识别并警告程序员错误。它还可以发现当开发人员在同一个项目中重用其他人的代码时发生的重复。

在预测试模式下，您可以在提交之前将补丁上传到 CI 系统，系统本身会将它应用到项目代码和所有程序集，然后检查会自动开始。这个特性在开发人员很难开始自己测试的情况下特别有用，并且这个过程是在不同的操作系统版本的架构下执行的。

**优点:**

*   支持多平台和多版本控制系统。JetBrains 试图让他们的产品尽可能的精通，以便支持不同的编程语言(Ruby，Java，...。NET)、多版本控制系统(如 Git、SVN、吉拉)和构建运行器(Rake、MSBuild、Nant、ant)
*   出色的报告选项。TeamCity 自动检查正在运行的代码，甚至在构建完成之前就提供关于错误的报告。这样，您可以在更短的时间内发现并修复错误。
*   几个协作选项。TeamCity 对于个人和企业来说都是灵活高效的。该平台根据您需要的功能提供订阅包。

**缺点:**

*   只能有一个生成配置。
*   当被触发时，构建选项不能被更改。
*   运行 Bash 脚本时，只检查最后一个命令的结果。
*   由于主要的配置工作是在接口中进行的，所以性能与这个接口的速度成正比，相当慢。

**概要:**

*   操作系统:Linux、macOS、Windows
*   容器支持:是
*   文档:非常好
*   定价:从 45 美元到 1999 美元或更高(针对企业)

### 6.圆形 CI

[CircleCI](https://web.archive.org/web/20221117203653/https://circleci.com/) 是一个基于云的系统，不需要你设置单独的服务器，也不需要管理。CircleCI 是配置最少的交钥匙解决方案。但是，还有一个内部版本，您可以部署在私有云上。即使是商业用途，也有可能免费使用 CircleCI。

使用 REST API，您可以访问项目、程序集和工件。装配结果是一个工件或一组工件。一个工件可以是一个已编译的应用程序或者可执行文件(例如，一个 Android 的 APK)或者元数据(例如，关于一个成功测试的信息)。

CircleCI 缓存第三方依赖项，避免不断安装所需的环境。

CircleCI 可以通过复杂的缓存、dock 级缓存、用于在更快的机器上运行的资源类以及性能评估来高效地运行非常复杂的管道。作为开发人员，您可以使用 SSH 来执行任何调试任务，或者在。circleci/config.yml 文件来加速作业。

作为安装在服务器上的 CircleCI 的操作员或管理员，您会喜欢 CircleCI 监视和分析您的构建，并使用 Nomad 集群进行调度。

**优点:**

*   自定义构建环境和语言支持。通过使用 Docker 映像或 LINUX / Windows / macOS 虚拟机(VM)设置管道运行时，可以将 CircleCI 配置为模拟目标部署环境。您可以使用 CircleCI 提供的预建 Docker 映像，或者选择自己的 Docker Hub 映像作为运行时。
*   CircleCI 预装了 Android SDK、NDK 和其他依赖项，并允许您在 Linux 虚拟机上构建和测试 Android 应用程序。
*   它支持多种语言，包括 PHP、Python、Java、Javascript、ReactNative、RoR、Elixir、Scala 等。
*   CircleCI 提供应用级安全性和沙盒运行时安全性。CircleCI 通过 SOC 2 和 FedRAMP 认证。
*   商业使用的免费版本。即使是小团队也能从 CircleCI 的广泛功能中受益。你甚至不需要设置一个专用的 CircleCI 服务器。
*   灵活的配置。CircleCI 可以配置为将代码部署到各种环境，包括 AWS CodeDeploy、AWS EC2 Container Service (ECS)、AWS S3、Google Kubernetes Engine (GKE)、Microsoft Azure 和 Heroku。其他的云服务部署很容易使用 SSH 或者通过在您的工作配置中安装一个服务 API 客户端来编写。

**缺点:**

*   免费版的 CircleCI 只支持 Ubuntu 12.04 和 14.04。使用 macOS 需要付费。
*   尽管 CircleCI 可以与任何编程语言一起工作，但它只支持 Go (Golang)、Haskell、Java、PHP、Python、Ruby/Rails 和 Scala。

**概要:**

*   操作系统:Ubuntu、macOS、Linux、Android 和 Windows
*   容器支持:是
*   文件:合理
*   定价:免费/付费选项高达 3150 美元及以上

### 7.特拉维斯·CI

Travis CI 是一个持续集成平台，对 GitHub 上的所有开源项目都是免费的。只要有一个名为. travis.yml 的文件，其中包含有关项目的一些信息，您就可以在主分支、其他分支甚至是 pull 请求中的代码库发生变化时触发自动构建。不要混淆 travis-ci.org 和 travis-ci.com。第一个是开源项目的免费服务，第二个是付费的 CI 系统。Travis CI 和 CircleCI 很像。

两个系统:

*   使用 YAML 格式的配置文件；
*   部署在云中；
*   支持 Docker 进行测试。

然而，TravisCI 有一些 CircleCI 没有的额外东西:

*   在 Linux 和 Mac OS X 下同时运行测试。
*   支持更多现成的语言:
    *   Android、C、C #、C ++、Clojure、Crystal、D、Dart、Erlang、Elixir、F #、Go、Groovy、Haskell、Haxe、Java、JavaScript(带 Node.js)、Julia、Objective-C、Perl、Perl6、PHP、Python、R、Ruby、Rust、Scala、Smalltalk、Visual Basic。
*   构建矩阵支持。

**优点:**

*   轻松快速地开始工作。CircleCI 拥有无缝的 onboarding，可以在内部和云中运行。
*   CircleCI 可以用于在 CircleCI 云计算中组织 CI/CD 管道，或者您也可以通过在您的基础设施上运行 CircleCI 来实现 CI/CD。这将使您完全控制功能和维护工作。
*   您可以将 CircleCI 与云生态系统 AWS、Azure、DeployHub、Cloud Foundry、Google Cloud、OpenShift、Serverless 和一系列其他环境/平台集成，以部署您的应用程序。

**缺点:**

*   价格比 CircleCI 高，没有商业使用的免费版本；
*   它的定制选项有限(有些东西可能需要第三方软件)。

**概要:**

*   操作系统:Ubuntu，macOS
*   容器支持:是
*   文档:好
*   定价:开源免费/商业使用 69-479 美元

### 奖金:坞站/坞站集线器

我们在本文中多次提到 Docker，这是有原因的。得益于容器化技术，Docker 是一种工具，即使 Docker 平台本身运行在不同的环境中，也可以轻松地在相同的环境中分发、部署和运行应用程序。

许多开发人员认为 Docker 是最有效的容器技术。弄清楚 Docker 的安装说明可能很棘手，但是一旦你安装了它，你就不会后悔。

Docker Hub 与 Git 资源库的 GitHub 或 JavaScript 包的 NPM 注册表大致相同。它有以下好处:

*   持续开发和零停机部署。假设你写了一个脚本，需要某个版本的库，以及一些预装的软件才能运行，你想和同事分享你的工作成果。您的同事需要为自己重新安装所有必要的库，或者每个人都应该自己配置 Virtualenv。通过将您的脚本作为容器来提供，可以简化整个沉闷的过程。应用程序将提供启动所需的所有环境，同事们只需执行一个简单的命令即可启动。
*   易于迁移。您有一个 web 应用程序，其中部署了 web 服务器和服务器应用程序。在迁移过程中，您可以重新注册权限、配置和设置环境，但是在新实例上启动准备好的容器比重新配置更容易。
*   运行不安全的代码。Docker 允许你运行任何软件，包括图形软件，通过安全地将它隔离在一个容器中。因此，它非常适合运行各种不可信或不安全的代码。

## 结论

在 ML 项目的任何阶段，开箱即用的 CI/CD 工具对于监控代码报告的变更和生成单元&集成测试是必要的。由于数据是一种重要的业务资源，就像开发人员的时间一样，自动化和优化工具应该成为您最好的朋友。

机器学习模型每天都要经历很多次转换。数据的频繁变化，它们从一种状态到另一种状态的转换——所有这些都迫使经理们尝试 CI/CD 这样的软件管理方法，这种方法让你可以使用复杂的机器学习模型，而不会损失数据管理的质量。