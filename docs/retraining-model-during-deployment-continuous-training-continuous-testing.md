# 部署期间的再培训模型:持续培训和持续测试

> 原文：<https://web.archive.org/web/https://neptune.ai/blog/retraining-model-during-deployment-continuous-training-continuous-testing>

培训、测试和部署–就这样，对吗？你的工作完成了吗？不完全是！

数据科学家在机器学习方面犯的最大错误之一是，他们假设他们的模型在部署后将永远保持正常工作。但是那些不可避免会不断变化的数据呢？一个部署在生产环境中并任其发展的模型将无法独自适应数据的变化。

在 2020 年 8 月的一项英国银行调查中，35%的受访银行家表示疫情对 ML 模型的表现有负面影响。像这样不可预测的事件是一个很好的例子，说明了为什么与静态验证和测试技术相比，对生产中的 ML 模型进行持续的训练和监控是非常重要的。

![Retraining models - impact of changes](img/4b3e822fe38caf14980304fa565764b2.png)

*The impact of the pandemic on the performance of banks’ machine learning models | [Source](https://web.archive.org/web/20230303173648/https://www.bankofengland.co.uk/bank-overground/2021/how-has-covid-affected-the-performance-of-machine-learning-models-used-by-uk-banks)*

## 在生产中部署您的模型

一家初创公司最近聘请你作为首席数据科学家，构建一个预测模型，确定某些城市的房价。您的模型性能指标看起来很棒，您的应用可以部署到生产环境中了。

![Model deployment](img/9538b61a8e41dc03db6a0f1374fd91a8.png)

*Life cycle of a model deployed in production | [Source](https://web.archive.org/web/20230303173648/https://martinfowler.com/articles/cd4ml.html)*

您成功部署了您的模型。下一步是什么？三件事:

*   模型服务
*   模型性能监控
*   模型再训练

### 模型服务

模型服务是模型在生产中被消费的过程。它因不同的业务用例而异。在您构建自动化的模型再培训管道之前，了解您的模型将如何在生产中被消费是很重要的。有几种方法可以将你的机器学习模型生产化，比如 [**模型即服务、模型即依赖、批量预测(预计算服务)**](https://web.archive.org/web/20230303173648/https://ml-ops.org/content/three-levels-of-ml-software#code-deployment-pipelines) **。**

### 模型性能监控

模型性能监控是基于实时数据跟踪机器学习模型性能的过程，以便识别可能影响业务的潜在问题。一个好的模型监控管道应该监控模型的可用性、实时数据的模型预测和性能，以及 ML 系统的计算性能

### 模型再训练

在监控和跟踪您的模型性能之后，模型管理的下一步是重新训练您的机器学习模型。目标是确保生产中模型的质量是最新的。

## 如何持续监控生产中的模型？

现在您意识到部署不是模型管理的最后阶段，它只是开始。就像软件部署一样，您的代码是确定性的，将总是按照编写的那样运行，并且您的团队总是可以在软件上部署新功能。但在机器学习中，开发管道包括 3 个层次的变化:数据、算法(模型)和代码。

那么，当您在生产中部署您的模型时，您需要监视什么呢？

### 数据有效性

您需要监控您的模型在上游管道中接收的数据，因为“垃圾进，垃圾出”。您的模型对它接收的输入数据很敏感。如果生产数据中的定型数据的统计分布发生变化，模型性能将会显著下降。

#### 要监控的主要数据质量问题:

1.  **数据模式**

在重新训练您的模型之前，您需要验证您的输入数据符合预期的上游模式。这意味着您的下游管道步骤，包括数据处理和模型训练，应该与来自生产数据的模式完全相同。您可以使用 Python **断言方法** 来验证您的模式是否符合预期的模式。

如果模式不符合预期的模式，数据科学团队可以更新管道来处理这些更改。这可能意味着从头开始重新训练一个新的模型来适应新的特性，或者仅仅意味着重新命名这些特性。

2.  **数据漂移**

另一个需要注意的数据质量问题是数据漂移。这仅仅意味着数据的统计属性发生了变化。

### 模型验证

成功验证数据管道后，您还需要验证模型管道。模型管道在部署到生产环境之前经过验证。

模型验证步骤包括:

1.  **使用采用的指标和选择的阈值测试模型性能。**在生产中监控模型性能非常重要。如果低于阈值，可以触发再培训作业。可以测试重新训练的模型。
2.  模型元数据和版本控制。监控生产中的有效方式非常重要。在重新训练你的机器学习模型时运行一系列实验后，你需要保存所有的模型元数据，用于[再现性](/web/20230303173648/https://neptune.ai/blog/how-to-solve-reproducibility-in-ml)。您的再培训管道应该将不同的模型版本和元数据与模型性能度量一起记录到元数据存储中。管理模型元数据的一个非常好的工具是 [Neptune AI](/web/20230303173648/https://neptune.ai/blog/ml-metadata-store) 。
3.  **一致的对手。**随着机器学习领域的发展，企业开始采用机器学习应用程序作为中央决策者。在生产中监控模型的安全性是很重要的。一些机器学习模型，如信用风险模型，容易受到对抗性攻击。欺诈者总是在寻找不同的方法来欺骗一个准备识别可疑信用卡交易的模型。
4.  **模型基础设施。**在部署到生产环境之前，您还需要监控模型基础设施与预测服务 API 的兼容性和一致性。

让我们来看看一些可用于持续监控的最佳工具。使用这些工具，您可以同时运行模型来测试它们在生产中的性能。

Neptune 是一个模型监控平台，允许您运行大量实验，并为您的 MLOps 工作流存储所有元数据。借助 Neptune，您的团队可以跟踪实验并重现有前途的模型。很容易与任何其他框架集成。使用 Neptune AI，您可以有效地监控您的模型管道。每个模型实验/运行都可以被记录。

Qualdo 是一个很好的工具，用于监控生产中的模型。您可以监控您的上游管道，以识别持续摄取过程中的数据问题。您还可以监控模型在生产中的性能，并从生产数据的预测中获得见解。Qualdo 还允许您设置警报，以在模型性能超过某个阈值时或在上游管道中发现数据漂移时提示您的团队。Qualdo 还允许您在 Tensorflow 中监控模型管线性能。

您可以阅读更多关于用于监控生产模型的最佳工具的信息[点击这里](https://web.archive.org/web/20230303173648/https://neptune.ai/blog/ml-model-monitoring-best-tools)。

现在您了解了如何在生产中持续监控您的模型。接下来呢？

## 什么是持续训练？

持续训练是机器学习操作的一个方面，它自动和持续地重新训练机器学习模型，以在数据被重新部署之前适应数据的变化。数据变更、模型变更或代码变更都可能触发重构。

## 为什么持续培训很重要？

我们将探讨为什么在花费了这么多时间培训和部署模型之后，您仍然需要在生产中更改模型。

### 机器学习模型会随着时间变得陈旧

一旦在生产中部署了机器学习模型，模型的性能就会下降。这是因为你的模型对现实世界的变化很敏感，而用户行为会随着时间不断变化。虽然所有的机器学习模型都会衰减，但是衰减的速度是随时间变化的。这主要是由数据漂移、概念漂移或两者共同造成的。

![Retraining models - graph](img/563584afc41e13762597f1a15b4dee46.png)

*Model performance decays with time*

听说过数据漂移吗？让我们探讨一下数据漂移的概念及其业务含义。

### 什么是数据漂移？

![Retraining models - data drift](img/c97f2faee2458baa97d5fd15ef278159.png)

*Consumer demand changes suddenly due to stay-at-home policy. | Image by Elena Samuylova [Source](https://web.archive.org/web/20230303173648/https://towardsdatascience.com/machine-learning-in-production-why-you-should-care-about-data-and-concept-drift-d96d0bc907fb)*

数据漂移(协变量移位)是生产数据的统计分布相对于用于训练或构建模型的基线数据的变化。由于以下原因，来自实时服务的数据可能会偏离基线数据:

*   现实世界的变化，
*   训练数据不代表总体，
*   数据质量问题，如数据集中的异常值。

例如，如果您使用从传感器收集的摄氏温度数据建立了一个模型，但单位更改为华氏温度-这意味着您的输入数据发生了变化，因此数据发生了漂移。

### 如何监控生产中的数据漂移

处理数据漂移的最佳方法是使用高级 MLOps 工具持续监控您的数据，而不是使用传统的基于规则的方法。基于规则的方法，如计算数据范围或比较数据属性以检测异常值，可能非常耗时，并且容易出错。

**检测数据漂移可采取的步骤:**

1.  利用 [JS-Divergence 算法](https://web.archive.org/web/20230303173648/https://en.wikipedia.org/wiki/Jensen%E2%80%93Shannon_divergence)识别实时模型输出中的预测漂移，并将其与训练数据进行比较。
2.  比较上游和下游数据的数据分布，查看实际差异。

如上所述，你还可以利用 [Fiddler AI](https://web.archive.org/web/20230303173648/https://www.fiddler.ai/) 平台来监控生产中的数据漂移。

### 什么是概念漂移？

概念漂移是一种现象，你试图预测的目标变量的统计特性会随着时间的推移而改变。这意味着概念已经改变，但是模型不知道这种改变。

当你的模型对目标类的最初想法改变时，概念漂移就发生了。例如，你建立一个模型来对围绕某些话题的推文的积极和消极情绪进行分类，随着时间的推移，人们对这些话题的情绪会发生变化。属于积极情绪的推文可能会随着时间的推移演变成消极情绪。

简单来说，情感分析的概念已经漂移。不幸的是，你的模型会一直预测积极情绪为消极情绪。

### 数据漂移与概念漂移

显而易见，世界上每时每刻都在产生数据。随着从多个来源收集数据，数据本身也在发生变化。这种变化可能是由于数据的动态性质，也可能是由现实世界中的变化引起的。

如果输入分布发生变化，但真实标签没有变化(模型输入的概率发生变化，但给定模型输入的概率的目标类的概率没有变化)，那么这种变化被认为是数据漂移。

同时，如果模型的标注或目标类发生了变化，这就是在给定输入数据概率的情况下目标类发生变化的概率。这意味着我们正在检测概念漂移的影响。数据漂移和概念漂移都会导致模型衰退，应该分别处理。

## 定义再培训策略

现在你明白为什么在生产中监控和重新训练你的机器学习模型很重要了。那么，你如何重新训练你的机器学习模型呢？

为了回答这个问题，我们先来看看在设计持续训练策略之前应该问的一些问题。

| 问题 | 答案 |
| --- | --- |
| 

一个模特应该什么时候再培训？

 | 

–定期培训 rn–基于绩效的触发器 rn–基于数据变化的触发器 rn–按需再培训

 |
| 

再训练需要多少数据？

 | 

–固定窗口 rn–动态窗口 rn–代表性子样本选择

 |
| 

应该再培训什么？

 | 

–持续学习 vs 迁移学习 rn–离线(批量)Vs 在线(增量)

 |
| 

重新训练后什么时候部署你的模型？

 |  |

这些问题的答案可以分别回答，并有助于确定采取的策略。对于每个问题，我们将提出不同的方法来符合持续交付的原则。

## 你应该什么时候重新培训一个模型？

在重新训练机器学习模型之前，了解您的业务用例非常重要。一些用例对您需要重新训练您的模型的时间和频率有很高的要求。像欺诈检测和搜索引擎排名算法这样的业务用例需要频繁的再培训。就像根据行为数据训练的机器学习模型一样，因为行为数据是动态的——而根据制造数据训练的机器学习模型需要较少的再训练。

选择再培训计划有四种不同的方法:

*   **基于区间的再训练**

想知道如何安排您的模型再培训-每周，每月或每年？嗯，定期训练是重新训练你的模型的最直观和直接的方法。通过选择重新训练模型的时间间隔，您可以知道何时触发重新训练管道。这取决于你的训练数据更新的频率。

只有在与您的业务用例一致的情况下，基于时间间隔重新训练您的模型才有意义。否则，随机周期的选择将导致复杂性，甚至可能给你一个比先前模型更差的模型。

*   **基于绩效的触发器**

在生产中部署您的模型之后，您需要确定您的基线度量分数。在这种方法中，重建的触发是由于生产中模型性能的下降。如果你的模型性能低于你设定的阈值，这是事实，这将自动触发再培训管道。这种方法假设您已经在生产中实现了一个复杂的监控系统。

依赖模型在生产中的表现的缺点是，它需要时间来获得地面真相。在贷款/信贷模型的情况下，可能需要 30-90 天才能获得基本事实。这意味着，你需要等到得到结果后，再启动再培训工作，在大多数情况下，这可能会影响业务。

这种方法非常适合那些不需要很长时间就能获得基本事实的用例。您可以实时监控模型预测

![Model decay monitoring](img/de4d2ba5ac91b562dd57816e3e24b216.png)

*Trigger retraining Machine learning models based on performance | [Source](https://web.archive.org/web/20230303173648/https://ml-ops.org/)*

从上面的图像中，你可以看到 9 月份部署的机器学习模型的性能随着时间的推移不断下降。

*   **基于数据变化的触发**

通过监视生产中的上游数据，您可以确定数据分布的变化。这可能表明您的模型已经过时，或者您处于一个动态的环境中。当您无法从生产中的模型获得快速反馈或基本事实时，这是一个值得考虑的好方法。

您还可以将这种方法与基于性能的触发器结合使用。数据漂移是您的模型性能在生产中下降的一个主要原因，并且在任何情况下都可能导致您的模型性能低于您接受的性能阈值。这将自动触发模型再训练的构建。

![Model retraining signal trigger](img/fa75300b9be5a9fe6f254010c84021c9.png)

*Retraining machine learning models based on changes in datas* *| Image by Vidhi Chugh [Source](https://web.archive.org/web/20230303173648/https://towardsdatascience.com/when-are-you-planning-to-retrain-your-machine-learning-model-5349eb0c4706)*

这是一种手动重新训练模型的方法，通常采用传统的技术来重新训练模型。大多数创业公司在重新训练他们的模型时使用这种技术，这是一种启发式方法，可能会提高你的模型性能，但不是最好的。在生产环境中，您的机器学习操作应该是自动化的。

## 再培训需要多少数据？

我希望现在你已经清楚什么时候你需要重新培训你的模型，以及为什么要选择一个重新培训计划。了解如何选择正确的数据来重新训练模型，以及是否删除旧数据也很重要。

选择合适的数据大小时需要考虑三件事:

1.  您的数据有多大？
2.  你的数据在漂移吗？
3.  你多久得到一次新数据？

### 固定窗口大小

这是一种选择定型数据的直接方法，也是一种考虑定型数据是否太大而不适合的方法，并且您也不想在历史数据上定型模型。通过选择 X 个月的数据来重新训练模型，您应该记住重新训练模型的频率。

选择合适的窗口大小是使用这种方法的一个主要缺点，因为如果窗口大小太大，我们可能会在数据中引入噪声。如果太窄，可能会导致不合身。例如，如果您已经决定基于您的业务用例定期重新训练您的模型，那么您应该在重新训练间隔之前选择数据。

总的来说，这种方法是一种简单的启发式方法，在某些情况下效果很好，但在数据不断变化的动态环境中会失败。

### 动态窗口大小

这是固定窗口大小方法的替代方法。这种方法通过迭代窗口大小来确定要使用的最佳窗口大小，从而帮助确定应该使用多少历史数据来重新训练您的模型。如果您的数据很大，并且您也经常获得新数据，那么这是一种值得考虑的方法。

假设您在 100，000 条记录上训练了您的模型，现在您有 5000 条新记录可用。您可以将这 5000 条新记录作为您的测试数据，旧数据集的一部分或全部可以作为您的训练数据，这取决于在进行网格搜索以选择正确的窗口大小之后测试数据上的最佳模型性能。将来，在与测试数据进行比较之后，可以根据性能选择不同的窗口进行再训练。

![Training data vs test data](img/aa4d435316784bdc3d6d1970359c266d.png)

*Using dynamic window size to select the best training data | [Source](https://web.archive.org/web/20230303173648/https://towardsdatascience.com/framework-for-a-successful-continuous-training-strategy-8c83d17bb9dc)*

虽然动态窗口大小方法消除了从什么窗口大小中选择的挑战，并且更加数据驱动，但是它也像固定窗口大小方法一样给予新数据更多的优先权。它是计算密集型的，并且需要大量时间来达到完美的窗口大小。

### 代表性子样本选择

这种方法使用与生产数据相似的训练数据，这是重新训练机器学习模型的基本思想。为了实现这一点，您需要首先对您的生产数据进行彻底的分析，并排除表明存在漂移的数据。然后，您可以选择代表总体并且与原始数据的统计分布相似的数据样本。

## 应该重新培训什么？

例如，您在生产中部署了您的模型，并且还构建了一个监控系统来实时检测模型漂移。在观察到模型性能下降后，您选择了基于您的业务用例的重新训练策略。现在你只剩下应该训练什么了。有不同的方法来重新训练你的模型，最好的方法取决于你的用例。

### 持续学习与迁移学习

#### 持续学习

持续学习也称为终身学习。这种类型的学习算法试图模仿人类的学习。机器学习算法被应用于数据集以产生模型，而不考虑任何先前学习的知识，并且随着新数据变得可用，连续学习算法随着时间对机器学习模型进行小的一致更新。

为了更好地理解这个概念，让我们考虑一个用例，您正在为 Spotify 构建一个推荐系统，该系统会推荐用户感兴趣的歌曲。为了根据新的兴趣推荐新歌，你需要定期重新训练你的模型，因为用户行为会随着时间不断变化。

#### 迁移学习

迁移学习是一种机器学习技术，它重用现有模型作为重新训练新模型的基础。

*“迁移学习是通过从已经学习过的相关任务中迁移知识来提高在新任务中的学习”。—* *第十一章:迁移学习* *，* [*《机器学习应用研究手册》*](https://web.archive.org/web/20230303173648/https://amzn.to/2fgeVro) *，2009 年*

迁移学习的一个主要优势是模型能够被重新训练，而无需从头开始重建。这是一种优化技术，允许模型进行增量训练。它被广泛应用于深度学习算法中。

进一步阅读如何使用迁移学习-> [开发卷积神经网络模型时如何使用迁移学习](https://web.archive.org/web/20230303173648/https://machinelearningmastery.com/how-to-use-transfer-learning-when-developing-convolutional-neural-network-models/)

#### 使用迁移学习和继续学习的利弊

|  | 迁移学习 | 持续学习 |
| --- | --- | --- |
|  | 

——知识的传递。该模型可以在新的任务/概念上进行训练——节省再训练时间

 | 

–培训后保留知识 rn–节省培训时间 rn–使模型自动适应 rn–提高模型性能

 |
|  | 

—易受数据漂移影响——迁移学习仅在初始问题与模型试图解决的新问题相关时有效

 | 

——易受概念漂移

 |

### 离线学习与在线学习

#### 在线学习

离线学习又称为**批量学习**。你可能已经熟悉这种学习技巧，但可能不知道它的名字。这是建立机器学习模型的标准方法。基本上，您可以获得一个训练数据集，并立即在该数据集上构建模型。离线学习系统不能进行增量学习。一旦一个模型被部署到生产中，它就会应用它所学到的东西，并且不再需要学习就可以运行。

用离线学习重新训练你的模型意味着用更新的数据从头构建一个新的系统。这种方法简单明了，但是你需要考虑一个再培训策略，而想出一个再培训策略需要对业务目标有一个清晰的理解。

### 在线学习

也称为**增量学习。**在在线学习中，您通过顺序传递数据实例来增量地重新训练系统。这意味着当数据进来时，你正在重新训练你的模型。这种类型的学习使得重新训练更加容易，并且不需要假设数据是如何分布的。它没有考虑顾客行为的变化。

它也非常适合持续接收数据的系统，并且非常经济实惠。如果你的数据太大而无法容纳，在线学习是一个可以接受的折衷方案。在线学习帮助你的机器学习模型避免数据漂移。如果您的应用程序使用实时流数据，那么在线学习是一个不错的选择。

### 如何重新培训 scikit-learn 模型

一些 Sci-kit 学习算法支持在线学习。这些算法可以增量学习，而不必一次加载所有实例。这些估算器有一个叫做 ***partial_fit*** API 的方法。这对非核心学习有好处，而且保证了再培训的时间会很短。虽然一些 scikit-learn 模型不支持部分拟合，但一些算法可以允许您通过使用[***warm _ start***](https://web.archive.org/web/20230303173648/https://scikit-learn.org/stable/glossary.html#term-warm_start)参数进行重新训练。

支持增量学习的 scikit-learn 模型的示例可以在[这里](https://web.archive.org/web/20230303173648/https://scikit-learn.org/0.15/modules/scaling_strategies.html)找到。

|  | 在线学习 | 在线学习 |
| --- | --- | --- |
|  | 

——简单明了的方法。
–如果使用各种窗口选择过程正确选择了训练数据，数据漂移的空间很小或没有

 | 

–节省大量培训时间 rn–不占用大量计算能力。
——性价比

 |
|  | 

花费大量时间从零开始重新训练模型

 | 

——易受概念漂移的影响——与离线学习

相比，需要时间收敛到最小值 |

## 再培训后部署模式

耶！！！快好了。你现在一定很兴奋。您了解为什么您需要在生产中监控您的模型管道，以及何时触发您的再培训管道。现在你已经重新训练了你的机器学习模型，你的老板问“你什么时候部署新的模型更新？”。

**您应该在重新培训后立即部署吗？**

即使您已经重新训练了您的模型，并且性能指标看起来很好，更新的模型仍然有比以前的模型表现差的很大风险，即使在重新训练之后。

将旧模型留给特定的窗口或者直到模型服务了特定数量的请求，这是一个好的实践。然后你可以为新模型提供同样的数据并得到预测。这样，您可以比较两个模型的预测，以了解哪一个模型的表现更好。

如果你对新型号的性能满意，你可以放心地开始使用它。这是一个典型的 A/B 测试的例子，这将确保您的模型在上游数据上得到验证。

最佳实践是在重新培训后自动部署您的模型。您可以使用 [kubernetes](https://web.archive.org/web/20230303173648/https://kubernetes.io/) 将您的机器学习模型部署到生产环境中。

## 频繁重新训练模型的缺点

频繁再培训怎么会不好？在考虑重新训练你的模型之前，你应该有一个特定的业务用例和正确的重新训练策略。正确的策略并不总是意味着频繁的再培训。

频繁地重新训练你的模型会导致系统的复杂性或隐藏的成本，并且也容易出错。因此，应该在成本和业务目标之间取得平衡。与重新训练模型相关的一些复杂性或成本包括:

云解决方案的培训模型可能非常昂贵，而且需要大量时间。想象一下，必须每天在云 GPU 上重新训练您的模型，这将产生不必要的成本，因为重新训练模型并不一定意味着“提高模型性能”。

不同的团队参与了机器学习模型开发的生命周期，而不仅仅是数据科学团队。在部署新模型之前，它可能需要业务利益相关者的批准，然后机器学习工程师不得不担心在生产中部署它。

![Retraining models - ML team](img/44407d3c3c0a137e07f8a57f099faaae.png)

*Disadvantages of retraining your models frequently | [Source](https://web.archive.org/web/20230303173648/https://martinfowler.com/articles/cd4ml.html)*

这会导致延迟或摩擦。如果你没有一个先进的机器学习操作平台，这个特殊的用例是至关重要的。

如果您很少重新训练您的模型，那么很容易使用简单的系统架构。但是如果你频繁地重新训练你的模型，你必须设计一个更复杂的系统。您需要设计一个管道，在没有人工干预的情况下，重新培训、评估和部署您的模型到生产中。

## 生产中持续培训和持续监控的最佳实践

在建立任何机器学习模型之前，你需要有一个 MLOps 的思维模式。您的[端到端管道](/web/20230303173648/https://neptune.ai/blog/end-to-end-mlops-platforms)应遵循四个关键 [MLOps 原则](/web/20230303173648/https://neptune.ai/blog/mlops-principles):

1.  自动化，
2.  可重用性，
3.  再现性，
4.  可管理性。

有了这些原则，您一定可以保护您的模型免受不希望的性能下降，并且您的模型在生产中的质量是最新的。

通过自动化您的 ML 生命周期来构建、培训、部署和监控您的 ML 模型，您可以轻松地交付您的 ML 应用程序和商业价值。

您的端到端 ML 管道由 3 部分组成:

![End to end ML pipeline](img/8550cf274d67398d7acf2953c07c0cf1.png)

*Image modified by the author and adapted from this* [*source*](https://web.archive.org/web/20230303173648/https://www.viqtordavis.com/en-us/ml-ops)*.*

### 构建/CI 管道

这是作为代码部署的基础设施。CI 管道基于模板部署资源或依赖项。大多数数据科学家利用 docker 为他们的模型构建 docker 图像。除了构建包和可执行文件，您还可以测试您的代码质量，运行一些单元测试并测量您的模型延迟。如果这些测试是成功的，那么训练/释放管道是精心安排的。

### 列车/连续油管管道

这是从数据存储中提取数据、转换数据、创建和存储要素的管道。您可以在 CT 管线自动化过程中利用特征库。这是一个集中的地方，可以存储用于训练机器学习模型的精选功能。[特征库](https://web.archive.org/web/20230303173648/https://towardsdatascience.com/what-are-feature-stores-and-why-are-they-critical-for-scaling-data-science-3f9156f7ab4)让您在每次需要训练 ML 模型时重用特征，而不是重建这些特征。

在存储到[模型注册表之前，经过训练的模型也要经过评估和验证。](https://web.archive.org/web/20230303173648/https://neptune.ai/product/model-registry)

### 发布/CD 管道

CI/CT 阶段产生的工件被部署到生产环境中。模型工件被打包和部署，以满足生产中的请求。应监控性能结果、数据漂移和数据质量，并建立良好的警报系统。此阶段的输出是一个已部署的模型预测服务。

## 最后的想法

现在我希望你明白持续培训的含义，以及为什么在生产中重新培训你的模型是重要的。不要在生产中部署您的模型并放弃。一旦您的模型被部署，模型性能就开始下降。

在选择再培训策略之前，您需要了解您的具体用例。然后你就可以考虑你要多长时间重新训练一次，如何重新训练你的模型，重新训练你的模型需要用什么数据，重新训练后什么时候部署你的模型。

您需要持续监控生产中的模型，并确保您的模型是最新的。这是确保长期性能的唯一方法。

### 参考资料:

1.  [MLOps:机器学习中的连续交付和自动化管道](https://web.archive.org/web/20230303173648/https://cloud.google.com/architecture/mlops-continuous-delivery-and-automation-pipelines-in-machine-learning)
2.  [成功持续培训战略的框架](https://web.archive.org/web/20230303173648/https://towardsdatascience.com/framework-for-a-successful-continuous-training-strategy-8c83d17bb9dc)
3.  [为什么您应该关注数据和概念漂移](https://web.archive.org/web/20230303173648/https://towardsdatascience.com/machine-learning-in-production-why-you-should-care-about-data-and-concept-drift-d96d0bc907fb)
4.  [数据漂移入门](https://web.archive.org/web/20230303173648/https://medium.com/data-from-the-trenches/a-primer-on-data-drift-18789ef252a6)
5.  [关于如何监控生产模型的全面指南](/web/20230303173648/https://neptune.ai/blog/how-to-monitor-your-models-in-production-guide)
6.  [机器学习(ML)操作加速器](https://web.archive.org/web/20230303173648/https://www.viqtordavis.com/en-us/ml-ops)
7.  [概念漂移最佳实践](/web/20230303173648/https://neptune.ai/blog/concept-drift-best-practices)
8.  [机器学习的连续交付](https://web.archive.org/web/20230303173648/https://martinfowler.com/articles/cd4ml.html)