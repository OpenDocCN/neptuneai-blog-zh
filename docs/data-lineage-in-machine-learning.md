# 机器学习中的数据谱系:方法和最佳实践

> 原文：<https://web.archive.org/web/https://neptune.ai/blog/data-lineage-in-machine-learning>

数据应该是组织最宝贵的资产。然而，直到最近才出现这种情况，所以很少有人有处理数据和利用数据创造更多价值的经验。

随着管理人员对数据越来越熟悉，许多组织正在采用跟踪数据血统的做法，这已经成为推动组织提高数据效率的稳定支持。

## 什么是数据血统？

[数据谱系](https://web.archive.org/web/20221206010444/https://www.imperva.com/learn/data-security/data-lineage/#:~:text=Data%20lineage%20is%20the%20process,%2C%20what%20changed%2C%20and%20why.)是数据背后的故事。它从数据的创建点到消费点跟踪数据。这个数据流管道包括输入和输出点、数据经历的转换和建模过程、记录分析、可视化以及其他几个不断被跟踪和更新的过程。

数据沿袭的目标是观察数据的整个生命周期，以便可以升级和利用管道来获得最佳性能。

## 数据血统与数据来源

数据血统经常与[数据起源](https://web.archive.org/web/20221206010444/https://www.ands.org.au/working-with-data/publishing-and-reusing-data/data-provenance#:~:text=Data%20provenance%20is%20the%20documentation,lineage'%20or%20'pedigree'.)混淆，因为这种区别非常微妙，很容易被忽略。两者都有一个共同的目标，那就是通过跟踪和观察来为优化服务，但是在较高的层次上，数据血统是数据起源的子集。

数据沿袭通过跟踪数据的旅程(包括起源、目的地、转换和经历的过程)来特别关注数据，而数据起源则另外跟踪影响数据的所有系统和过程。

> 因此，**数据沿袭处理关于数据(元数据)**的数据，而**数据起源处理关于影响数据的过程的信息**。

## 为什么数据沿袭是必要的？

关于数据之旅及其经历的环境的知识提供了对数据当前状态的大量控制，可用于导航数据解决方案的最佳路线。

然而，使数据谱系成为绝对必要的是组织和行业之间日益增长的竞争和数据效率或专业知识。几年前，智能数据或统计解决方案是为组织提供竞争优势的好方法。然而，如今大多数组织都希望优化他们的数据资产。对数据的控制和了解正逐渐成为一种竞争优势。

以下是将数据沿袭视为提高数据效率的关键因素之一的几个理由:

数据是一种不断发展的动态资产，依赖静态数据可能会对业务决策和结果产生不利影响。不断收集、更新和验证数据是一个关键的过程。数据沿袭在升级数据的过程中非常有用，尤其是因为它具有跟踪能力。升级数据不仅仅是获取新数据，还包括理解旧数据集的相关性。数据沿袭有助于将新数据与旧的相关数据相结合，这样数据消费者(如开发人员、业务团队和利益相关者)就可以从数据资产中获得最大价值。

由于数据沿袭而记录的元数据会自动提供可用于合规性审计的详细信息，或者有助于提高数据管道的安全性。这也有助于理解数据流的结构和过程，并为即兴创作留出充足的空间。一致地跟踪元数据还可以减少技术债务，从而降低风险管理和法规遵从性的总体成本。

在实际场景中，经常需要将数据从一个数据源迁移到另一个数据源。这意味着在迁移过程中，一些细节，如位置、格式、存储、带宽、安全问题等。必须事先知道。数据沿袭非常适合这种设置，因为它几乎可以立即提供深入的细节，并且节省了成本和时间。有了可用的元数据集，还可以根据目标和源系统的参数自动化和标准化迁移过程。

数据沿袭对于维护数据的完整性至关重要，而数据的完整性对企业至关重要。通过不断跟踪数据的细节，可以在数据不一致、不相关或过时的情况下即时更新并提醒用户。开发、销售、营销和业务运营等多个部门依靠数据来改进他们的流程。新鲜健康的数据可以为商业决策带来巨大的速度和价值。

## 谁从数据沿袭中受益？如何受益？

因为组织中的几个部门依赖于数据沿袭，所以让我们更近距离地观察依赖者，以进一步理解对数据沿袭的需求。

每个处理数据的组织都有一个 ETL 部门，负责提取、转换和加载过程。它是从数据源提取数据，应用所需的转换，然后与目标系统共享数据的过程。ETL 开发人员处理大量的数据，数据沿袭可以方便地检测 ETL 过程中的错误，并创建详细的传输报告。

安全专家和开发人员经常想方设法保护数据管道易受攻击的端点。数据沿袭始终如一地带来关于这些端点的关键信息，这有助于通过排列和组合进行实验。关于漏洞、死亡和导致它们的过程的记录，提供了更大的安全改进空间。

业务团队使用多个报告，在数据沿袭的帮助下，他们可以轻松地导航到报告的来源，并在必要时验证数据。

数据管理员是负责组织数据资产质量的个人。因此，数据管理员应该知道他/她所管理的数据的来龙去脉，而数据血统使得这个过程更加准确、透明和用户友好。

## 数据沿袭的方法

以下是执行数据沿袭跟踪的几种方法:

*   **通过数据标记传承**

这种方法基于一个假设，即转换工具始终与数据相关，并且在执行转换后标记数据。为了跟踪标记，了解标记的格式很重要，这样就可以在管道中发现它。该方法仅在仅部署了已知转换工具的封闭系统中是可靠的。

这是在完全由组织控制的封闭环境中追溯血统的时候。几乎每种类型的数据支持(数据湖、存储工具、数据管理和处理逻辑)都是环境的一部分。因此，沿袭也被限制在数据环境的边界，并且不知道外部的过程。

数据沿袭通过解析读取代码或转换逻辑，以了解数据如何达到其当前状态。在处理转换逻辑时，它能够追溯到以前的状态，并完成端到端的沿袭追踪。基于解析的沿袭不是技术不可知的，因为它需要理解数据上部署的编码语言和转换工具。这直接限制了该过程的灵活性，尽管它是最先进的谱系追踪技术之一。

这种数据沿袭的方法不适用于负责数据转换的代码。相反，该过程只观察数据并寻找模式来跟踪血统，这使得它完全与技术或算法无关。这不是一个非常可靠的方法，因为它容易丢失代码中根深蒂固的模式。

## 跨管道的数据沿袭

为了捕获端到端的沿袭，必须在数据管道的每个阶段和流程中跟踪数据。以下是执行数据沿袭的各个阶段:

数据收集或接收阶段是数据进入核心系统的阶段。数据沿袭可用于跟踪源系统和目标系统的重要信息，以验证数据、映射和转换的准确性。密切跟踪系统也有助于更容易地识别错误。

数据处理占据了创建数据解决方案的整个过程的很大一部分。它涉及到多种转换、过滤器、数据类型、表和存储位置。记录每个步骤的元数据不仅有助于合规性和生产速度，还能使开发过程更加丰富和高效。它使开发人员能够更详细地分析流程成功或失败背后的原因。

*   **数据存储和访问阶段**

组织通常部署大型数据湖来存储他们的数据。数据沿袭可用于跟踪访问权限、端点的生命特征和数据事务。这将提高安全性和合规性的自动化程度，鉴于数据湖的规模和复杂性，这是一个巨大的优势。

用户使用一系列功能(如连接和过滤)提出多个数据查询。有些功能在处理器上负担很重，因此效率较低。数据沿袭可以观察查询，以跟踪和验证流程以及由流程产生的不同版本的数据。同时，它还帮助优化查询，并提供包括最佳解决方案实例的报告。

## 数据沿袭的最佳实践

数据谱系是一个不断发展的学科，其过程正在快速改进。这里有一些基本的最佳实践可以保持这种势头:

到目前为止，组织的一般实践都是手工记录血统。鉴于生产的动态性和快节奏，手动跟踪不再可行。还建议使用同类最佳的数据目录来提高自动化程度。他们集成 AI 和 ML 来组合来自多个系统的元数据，以形成血统的逻辑流。它还具有从元数据中提取和形成结论的能力。

数据总是容易出错，这就是为什么在沿袭追踪中包含不同流程和工具的所有者非常重要。所有者最接近并最了解其应用程序生成的细节，并且能够足智多谋地指出记录或流程中的缺陷或错误。

*   **包含元数据源**

包括由处理、转换或传输数据的不同过程生成的数据，对于最准确地跟踪数据谱系至关重要。因此，应该将这些过程在数据上创建的元数据纳入沿袭跟踪。

*   **渐进式提取和验证**

为了最准确地映射谱系，建议按照数据管道的各个阶段连续记录元数据。这创建了一个定义良好的时间线，并以可读性更好的格式组织了大量的元数据日志。这种数据的渐进验证也变得更容易，从而可以首先验证高级连接。一旦它们清楚了，更深层次的复杂性就可以逐层验证了。渐进式方法在读取或提取数据时保持逻辑模式并减少错误。

尽管数据谱系是一个相对较新的学科，但它已经在后台发展了多年。最初，这些工具都是版本控制系统，最终扩展到更大的数据谱系学科。让我们浏览几代版本控制工具，了解它是如何给我们带来数据血统的。

### 几代数据沿袭平台:

*   **第一代:**第一代版本跟踪是原始的、完全手动的，主要由一个通过“锁”访问文档的人来管理。

*   第二代:第二代是一个巨大的进步，因为它允许社会协作，允许多个用户，通常是内部用户，来处理代码。唯一致命的缺点是代码合并的效率很低，需要开发人员在最终提交之前从外部合并代码。

*   **第三代:**第三代致力于克服第二代工具的缺点，并允许开发人员，不仅仅是内部的，而是全球的，在提交后的后期阶段协作并合并他们各自的有差异的版本。世界范围的网络和容易合并的设施允许巨大的扩展能力，特别是在开源社区。

*   **第四代:**版本控制的最后一代，也是现在的一代，是像 Pachyderm 这样的数据谱系平台的一部分。它在第三代的基础上即兴发挥，通过相当开放的过程实现版本控制，进入人工智能解决方案的生产。第四代的工作是跟踪系统中涉及的所有流程和工具，如云、存储、数据版本、算法等，同时保持不变性。总的来说，它成功地跟踪了数据管道的端到端流程。

### 数据沿袭的工具/平台:

下面是一些流行的数据沿袭工具。

Talend data catalog 是一个一站式资源，用于获取对您的数据进行处理的过程的详细信息。它可以搜索、提取、管理和保护来自多个来源的元数据，并能够自动搜索这些来源。

IBM DataStage 将分析、云环境、治理和数据操作结合在一个为人工智能开发而构建的平台中。它通过基于容器的架构提供高质量的数据。

Datameer 为构建数据管道提供了可视化的无代码体验，并允许数据专家协作来发现、访问、建模和传输数据。高质量的用户体验和强大的技术支持使 Datameer 成为强有力的竞争者。

Neptune 提供了一个单一的平台和仪表板来跟踪元数据、数据日志，并提供简单的功能，如名称空间和基本的日志记录方法来组织和组合几种类型的 ML 元数据。Neptune 的用户界面也显示[数据版本控制](https://web.archive.org/web/20221206010444/https://docs.neptune.ai/you-should-know/what-can-you-log-and-display#data-versions)文件，用户只需指定他们想要记录的类型。Neptune 的整体视觉体验包括图表、图像和表格，这使得该平台对于数据跟踪来说非常用户友好。

## 数据谱系的未来

在过去的几年中，一些新的学科已经开始发展，其影响已经触及了几个行业的边界。5G、边缘计算、物联网，当然还有人工智能等技术将产生大量宝贵的数据。为了充分利用这一容量，定义良好的跟踪系统是未来的需要，而该基础设施的基础是当前的责任。

一旦这些技术随着云进一步扩展，数据必然会暴露给外部代理，如连接到物联网的物理系统、边缘服务器和一般的云。数据转换将发生在遥远和断开的位置，这些位置通常是易受攻击的端点，有可能将数据管道置于危险之中。

通过安全地管理即使在今天仍在快速增长的庞大数据环境，数据血统将成为早期接受者的竞争优势。有了沿袭，跟踪错误和漏洞就容易多了，这样负责的系统就可以快速升级。此外，采用数据谱系的扩展好处，如降低成本、高可伸缩性、合规性、高数据和流程质量，预计将成为基于数据的行业的必备好处。

### 资源